// Primary Database Schema - FleetStack_db
// Main business logic tables

generator client {
  provider = "prisma-client-js"
  output   = "../generated/prisma-primary"
}

datasource db {
  provider = "postgresql"
  url      = env("PRIMARY_DATABASE_URL")
}

model User {
  id        Int      @id @default(autoincrement())
  email     String   @unique
  username  String   @unique
  firstName String?  @map("first_name")
  lastName  String?  @map("last_name")
  phone     String?
  role      UserRole @default(USER)
  isActive  Boolean  @default(true) @map("is_active")
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  // Relations
  vehicles Vehicle[]

  @@map("users")
}

model Vehicle {
  id           Int           @id @default(autoincrement())
  licensePlate String        @unique @map("license_plate")
  make         String
  model        String
  year         Int
  color        String?
  vin          String?       @unique
  status       VehicleStatus @default(ACTIVE)
  mileage      Int?
  fuelType     FuelType      @default(GASOLINE) @map("fuel_type")

  // Foreign Keys
  ownerId Int @map("owner_id")

  // Relations
  owner User @relation(fields: [ownerId], references: [id], onDelete: Cascade)

  // Timestamps
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  @@map("vehicles")
}

enum UserRole {
  ADMIN
  MANAGER
  USER
  DRIVER
}

enum VehicleStatus {
  ACTIVE
  INACTIVE
  MAINTENANCE
  RETIRED
}

enum FuelType {
  GASOLINE
  DIESEL
  ELECTRIC
  HYBRID
}
